<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
          		xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <title>萌芽書屋</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
        <script src="https://unpkg.com/vue/dist/vue.js" th:src="@{/webjars/vue/2.1.3/vue.js}"></script>
    	<script src="https://unpkg.com/axios/dist/axios.min.js" th:src="@{/webjars/axios/0.15.2/dist/axios.js}"></script>
    	<script src="https://cdn.jsdelivr.net/vue.resource/1.0.3/vue-resource.min.js"
            th:src="@{/webjars/vue-resource/1.0.3/dist/vue-resource.js}"></script>

        <script type="text/javascript" th:src="@{/js/product.js}"></script>
        <script type="text/javascript" th:src="@{/js/bootpag.min.js}"></script>
        <script type="text/javascript" th:src="@{/js/bootstrap.bundle.js}"></script>
        <script type="text/javascript" th:src="@{/js/bootstrap.js}"></script>
        <script type="text/javascript" th:src="@{/js/form-validation.js}"></script>
        <script type="text/javascript" th:src="@{/js/axios.min.js}"></script>
    </head>

    <body>
        <link rel="stylesheet" type="text/css" th:src="@{/js/growbook.css}">
        <div id="title">
            <div class="container">
                <ul class="nav nav-pills justify-content-end">
                    <li class="nav-item">
                        <div>歡迎光臨</div>
                    </li>
                    <li class="nav-item">
                        <button type="button" class="btn btn-outline-primary btn-sm" th:href="@{/index}">所有商品</button>
                    </li>
                    <!-- 註冊帳號開始Button to Open the Modal -->
                    <li class="nav-item">
                        <button type="button" class="btn btn-outline-primary btn-sm" data-toggle="modal" data-target="#myModalReg">會員註冊</button>
                        <!-- The Modal -->
                        <div class="modal fade" id="myModalReg">
                            <div class="modal-dialog">
                                <div class="modal-content">

                                    <!-- Modal Header -->
                                    <div class="modal-header">
                                        <h1 class="h3 mb-3 font-weight-normal">註冊會員帳號</h1>
                                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                                    </div>

                                    <!-- Modal body -->
                                    <div class="modal-body">
                                        <form class="form-signup"  th:action="@{/users/login}" method="POST" id="regForm" onsubmit="false;">
                                            <label>請輸入帳號</label>
                                            <label for="input_username" class="sr-only">User Name</label>
                                            <input type="username" class="form-control"
                                                    placeholder="UserName" name="userName" required autofocus><br/>
                                            <label>請輸入電子信箱</label>
                                            <label for="Email" class="sr-only">Email</label>
                                            <input type="email" name="Email" class="form-control"
                                                    placeholder="Email" required><br/>
                                            <label>請輸入密碼</label>
                                            <label for="input_password" class="sr-only">Password</label>
                                            <input type="password" class="form-control"
                                                     placeholder="Password" name="password" required><br/>
                                            <label>請再輸入一次密碼</label>
                                            <label for="input_confirmPassword" class="sr-only">Confirm Password</label>
                                            <input type="password" class="form-control"
                                                     placeholder="ConfirmPassword" required><br/>
                                            <button type="submit" onclick="register();" class="btn btn-primary btn-block">註冊帳號</button>
                                        </form>
                                    </div>

                                    <!-- Modal footer -->
                                    <div class="modal-footer">

                                    </div>
                                </div>
                            </div>
                            <p></p>
                        </div>
                    </li>
                    <!-- 註冊帳號結束Button to Open the Modal -->

                    <!-- 登入帳號開始Button to Open the Modal -->
                    <li class="nav-item">

                        <!-- Button to Open the Modal -->
                        <button type="button" class="btn btn-outline-primary btn-sm" data-toggle="modal" data-target="#myModalMem">會員登入</button>

                        <!-- The Modal -->
                        <div class="modal fade" id="myModalMem">
                            <div class="modal-dialog">
                                <div class="modal-content">

                                    <!-- Modal Header -->
                                    <div class="modal-header">
                                        <h1 class="h3 mb-3 font-weight-normal">登入會員帳號</h1>
                                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                                    </div>

                                    <!-- Modal body -->
                                    <div class="modal-body">
                                        <form class="form-signin" action="product.html" method="post" th:action="@{/index}">
                                        		<label style="color: red;" th:text="${msg}"></label>
                                            <label for="userName" class="sr-only">User Name</label>
                                            <input type="text" name="username" id="username" class="form-control"
                                                        placeholder="User Name" required autofocus><br/>
                                            <label for="Password" class="sr-only">Password</label>
                                            <input type="password" name="password" id="password" class="form-control"
                                                        placeholder="Password" required><br/>
                                            <button class="btn btn-primary btn-block" onclick="login();" type="submit">登入</button>
                                        </form>
                                    </div>

                                    <!-- Modal footer -->
                                    <div class="modal-footer">

                                    </div>
                                </div>
                            </div>
                            <p></p>
                        </div>
                    </li>
                    <!-- 登入帳號結束Button to Open the Modal -->
                </ul>
            </div>
        </div>

        <!-- 商品圖片框架開始 -->
        <div class="row" id="content" >
            <div class="col-md-4" align="center">
                <div class="card" style="width:360px;margin-left: 20px;" >
                    <img class="card-img-top" src=""  id="img1"  alt="Product Image 1" style="width:90%"  align="center">
                    <div class="card-body">
                        <h4 class="card-title" id="t1"></h4>
                        <p class="card-text" id="d1"></p>NT$
                        <p class="card-text" id="p1"></p>
                        <a href="" id="h1" class="btn btn-primary">放入購物車</a>
                    </div>
                </div>
            </div>

            <div class="col-md-4" align="center">
                <div class="card" style="width:360px;margin-left: 5px; margin-right:5px">
                    <img class="card-img-top" src="" id="img2"  alt="Product Image 2" style="width:90%"  align="center">
                    <div class="card-body">
                        <h4 class="card-title" id="t2"></h4>
                        <p class="card-text" id="d2"></p>NT$
                        <p class="card-text" id="p2"></p>
                        <a href="" id="h2" class="btn btn-primary">放入購物車</a>
                    </div>
                </div>
            </div>

            <div class="col-md-4" align="center">
                <div class="card" style="width:360px; margin-right:20px">
                    <img class="card-img-top" src="" id="img3"  alt="Product Image 3" style="width:90%"  align="center">
                    <div class="card-body">
                        <h4 class="card-title" id="t3"></h4>
                        <p class="card-text" id="d3"></p>NT$
                        <p class="card-text" id="p3"></p>
                        <a href="" id="h3" class="btn btn-primary">放入購物車</a>
                    </div>
                </div>
            </div>
        </div>
        <!-- 商品圖片框架結束 -->

        <p></p>

        <div id="end">
            <p></p>
            <p></p>
            <div id="page-selection">頁次</div>
         </div>
         
         <script type="text/javascript">
         /*
         // // 定義login函數，傳入帳號和密碼參數
			function login() {
				
				var username = username;
				var password = password;
					
			  // 定義請求設置
			  const config = {
			    headers: {
			      'Content-Type': 'application/json'
			    }
			  };
			  // 定義要傳送的數據
			  const data = {
			    username: username,
			    password: password
			  };
			  // 使用axios發送POST請求
			  return axios.post('/login', data, config)
			    .then(response => {
			      // 登入成功
			      console.log(response.data);
			      return response.data;
			    })
			    .catch(error => {
			      // 登入失敗
			      console.log(error.response.data);
			      throw error.response.data;
			    });
			}
			
			// 使用login函數進行登入
			login('username', 'password')
			  .then(data => {
			    // 登入成功後的操作
			    console.log(data);
			  })
			  .catch(error => {
			    // 登入失敗後的操作
			    console.log(error);
			  });
			  
			  	const formData = new FormData();
				formData.append('file', file);
				
				axios.post('/upload', formData)
				  .then(response => {
				    console.log(response.data);
				  })
				  .catch(error => {
				    console.log(error.response.data);
				  }); */

				function login() {
				  const username = document.getElementById("username").value;
				  const password = document.getElementById("password").value;
				
				  const data = {
				    username: username,
				    password: password,
				  };
				
				  axios.post("/login", data, {
				    headers: {
				      "Content-Type": "application/json",
				    },
				  })
				  .then(response => {
				    console.log(response);
				    // 登入成功後的操作
				  })
				  .catch(error => {
				    console.log(error.response);
				    // 登入失敗後的操作
				  });
				}
	
	    </script>
    </body>
</html>