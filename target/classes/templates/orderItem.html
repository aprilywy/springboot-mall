<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
      			xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <title>萌芽書屋購物車</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<!--        <script th:src="@{https://unpkg.com/vue#next}"></script>-->

        <script type="text/javascript" th:src="@{/js/product.js}"></script>
        <script type="text/javascript" th:src="@{/js/bootpag.min.js}"></script>
        <script type="text/javascript" th:src="@{/js/bootstrap.bundle.js}"></script>
        <script type="text/javascript" th:src="@{/js/bootstrap.js}"></script>
        <script type="text/javascript" th:src="@{/js/form-validation.js}"></script>
        <script type="text/javascript" th:src="@{/js/axios.min.js}"></script>
    </head>
	<body>
		<script type="text/javascript" th:src="@{/js/bootpag.min.js}"></script>
	    <link rel="stylesheet" type="text/css" th:src="@{/js/growbook.css}">
        <div id="title">
            <div class="container">
                <ul class="nav nav-pills justify-content-end">
                    <li class="nav-item">
                        <div class="p-2 text-dark" id="username" th:text="${session.username}">歡迎光臨</div>
                    </li>
                    <li class="nav-item">
                        <button type="button" class="btn btn-outline-primary btn-sm" th:href="{@/products}">所有商品</button>
                    </li>
                    <li class="nav-item">
                        <button type="button" class="btn btn-outline-primary btn-sm" th:href="{@/cartItem}">購物車</button>
                    </li>
                    <li class="nav-item">
                        <button type="button" class="btn btn-outline-primary btn-sm" th:href="{@/order}">我的訂單</button>
                    </li>
                </ul>
            </div>
        </div>
		<h3 align="center">萌芽書屋購物車</h3>
		<table cellpadding="2" cellspacing="2" border="1" border-color="#FFFBDB" align="center">
			<tr>
				<th>Option</th>
				<th>Id</th>
				<th>Name</th>
				<th>Photo</th>
				<th>Price</th>
				<th>Quantity</th>
				<th>Sub Total</th>
			</tr>
			<th:block var="total" value="0"></th:block>
			<th:forEach var="item" items="@{sessionScope.cart}">
				<th:set var="total" value="@{total+item.product.price * item.quantity}"></th:set>
				<tr>
					<td align="center">
					<a href="|@{pageContext.request.contextPath }/cart/remove/{item.product.id}|"
							onclick="confirm('確定要刪除{item.product.productName}?')">移除</a></td>
					<td>{item.product.id }</td>
					<td>{{item.product.productName }}</td>
					<td><img src="|@{pageContext.request.contextPath }/{item.product.photo}|"
							width="150"></td>
					<td>{{item.product.price}}</td>
					<td>{{item.quantity}}</td>
					<td>{{item.product.price * item.quantity}}</td>
				</tr>
			</th:forEach>
			<tr>
				<td colspan="6" align="right">總金額</td>
				<td>{{total}}</td>
			</tr>
		</table>
		<br><table cellpadding="2" cellspacing="2" border="0" align="center">
			<tr>
				<td><a th:href="../product.html">繼續選購</a></td>
				<td></td>
				<td><a th:href="|@{pageContext.request.contextPath}/order|">送出訂單</a></td>
	</tr>
	
		</table>
	</body>
</html>